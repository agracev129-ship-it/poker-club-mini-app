<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Poker Club - Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="app-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header class="app-header">
            <div class="header-content">
                <h1>üÉè Poker Club</h1>
                <div class="user-profile" onclick="showUserProfile()">
                    <span class="user-avatar" id="userAvatar">üë§</span>
                    <span class="user-name" id="userName">–ì–æ—Å—Ç—å</span>
                </div>
            </div>
        </header>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="app-nav">
            <button class="nav-btn active" onclick="showTab('home')">üè† –ì–ª–∞–≤–Ω–∞—è</button>
            <button class="nav-btn" onclick="showTab('tournaments')">üèÜ –¢—É—Ä–Ω–∏—Ä—ã</button>
            <button class="nav-btn" onclick="showTab('rating')">üìä –†–µ–π—Ç–∏–Ω–≥</button>
            <button class="nav-btn" onclick="showTab('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        </nav>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="app-content">
            <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
            <div id="homeTab" class="tab-content active">
                <div class="welcome-section">
                    <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Poker Club!</h2>
                    <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Ç—É—Ä–Ω–∏—Ä–∞–º, —Å–æ—Ä–µ–≤–Ω—É–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ –ø–æ–¥–Ω–∏–º–∞–π—Ç–µ—Å—å –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ!</p>
                </div>
                
                <div class="quick-actions">
                    <button class="action-btn" onclick="showTab('tournaments')">
                        <span>üèÜ</span>
                        <span>–¢—É—Ä–Ω–∏—Ä—ã</span>
                    </button>
                    <button class="action-btn" onclick="showTab('rating')">
                        <span>üìä</span>
                        <span>–†–µ–π—Ç–∏–Ω–≥</span>
                    </button>
                    <button class="action-btn" onclick="showTab('profile')">
                        <span>üë§</span>
                        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
                    </button>
                </div>

                <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) -->
                <div id="adminPanel" class="admin-panel" style="display: none;">
                    <h3>üîß –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
                    <div class="admin-stats">
                        <div class="admin-stat-card clickable" onclick="showAllUsers()">
                            <span class="stat-number" id="totalUsers">0</span>
                            <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                        </div>
                        <div class="admin-stat-card">
                            <span class="stat-number" id="totalTournaments">0</span>
                            <span class="stat-label">–¢—É—Ä–Ω–∏—Ä–æ–≤</span>
                        </div>
                        <div class="admin-stat-card">
                            <span class="stat-number" id="activeGames">0</span>
                            <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä</span>
                        </div>
                    </div>
                    <div class="admin-actions">
                        <button class="admin-btn" onclick="showAddTournamentModal()">‚ûï –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä</button>
                        <button class="admin-btn" onclick="showAllUsers()">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                        <button class="admin-btn" onclick="forceDataSync()">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                        <button class="admin-btn" onclick="createDemoData()">üé≤ –°–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ</button>
                    </div>
                </div>
            </div>

            <!-- –¢—É—Ä–Ω–∏—Ä—ã -->
            <div id="tournamentsTab" class="tab-content">
                <div class="section-header">
                    <h2>üèÜ –¢—É—Ä–Ω–∏—Ä—ã</h2>
                    <button class="add-btn" onclick="showAddTournamentModal()" id="addTournamentBtn" style="display: none;">‚ûï</button>
                </div>
                <div id="tournamentsList" class="tournaments-list">
                    <!-- –¢—É—Ä–Ω–∏—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <!-- –†–µ–π—Ç–∏–Ω–≥ -->
            <div id="ratingTab" class="tab-content">
                <div class="section-header">
                    <h2>üìä –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <div class="rating-filters">
                        <button class="filter-btn active" onclick="switchRatingPeriod('all')">–í—Å–µ –≤—Ä–µ–º—è</button>
                        <button class="filter-btn" onclick="switchRatingPeriod('month')">–ú–µ—Å—è—Ü</button>
                        <button class="filter-btn" onclick="switchRatingPeriod('week')">–ù–µ–¥–µ–ª—è</button>
                    </div>
                </div>
                <div id="ratingList" class="rating-list">
                    <!-- –†–µ–π—Ç–∏–Ω–≥ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div id="profileTab" class="tab-content">
                <div class="profile-section">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profileAvatar">üë§</div>
                        <div class="profile-info">
                            <h3 id="profileNickname">–ì–æ—Å—Ç—å</h3>
                            <p id="profileStats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</p>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="profile-btn" onclick="showAvatarModal()">üñºÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É</button>
                        <button class="profile-btn" onclick="showEditProfileModal()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    
    <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
    <div id="registrationModal" class="modal">
        <div class="modal-content">
            <h3>üéØ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Poker Club</h3>
            <form id="registrationForm">
                <div class="form-group">
                    <label for="gameNickname">–ò–≥—Ä–æ–≤–æ–π –Ω–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" id="gameNickname" required maxlength="20">
                </div>
                <div class="form-group">
                    <label for="preferredGame">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –∏–≥—Ä–∞:</label>
                    <select id="preferredGame">
                        <option value="texas_holdem">Texas Hold'em</option>
                        <option value="omaha">Omaha</option>
                        <option value="seven_card_stud">Seven Card Stud</option>
                        <option value="five_card_draw">Five Card Draw</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeModal('registrationModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –í—Ö–æ–¥ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h3>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
            <div class="login-options">
                <button class="login-btn" onclick="loginAsUser()">üë§ –í–æ–π—Ç–∏ –∫–∞–∫ –∏–≥—Ä–æ–∫</button>
                <button class="login-btn admin-login" onclick="loginAsAdmin()" id="adminLoginBtn" style="display: none;">üëë –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</button>
            </div>
        </div>
    </div>

    <!-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞ -->
    <div id="addTournamentModal" class="modal">
        <div class="modal-content">
            <h3>‚ûï –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä</h3>
            <form id="addTournamentForm">
                <div class="form-group">
                    <label for="tournamentName">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞:</label>
                    <input type="text" id="tournamentName" required>
                </div>
                <div class="form-group">
                    <label for="tournamentDate">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</label>
                    <input type="datetime-local" id="tournamentDate" required>
                </div>
                <div class="form-group">
                    <label for="tournamentDuration">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—á–∞—Å—ã):</label>
                    <input type="number" id="tournamentDuration" value="2" min="1" max="8">
                </div>
                <div class="form-group">
                    <label for="tournamentMaxPlayers">–ú–∞–∫—Å–∏–º—É–º –∏–≥—Ä–æ–∫–æ–≤:</label>
                    <input type="number" id="tournamentMaxPlayers" value="10" min="2" max="20">
                </div>
                <div class="form-group">
                    <label for="tournamentPrize">–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥:</label>
                    <input type="number" id="tournamentPrize" value="1000" min="0">
                </div>
                <div class="form-group">
                    <label for="tournamentType">–¢–∏–ø –∏–≥—Ä—ã:</label>
                    <select id="tournamentType">
                        <option value="texas_holdem">Texas Hold'em</option>
                        <option value="omaha">Omaha</option>
                        <option value="seven_card_stud">Seven Card Stud</option>
                        <option value="five_card_draw">Five Card Draw</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeModal('addTournamentModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit">–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞ -->
    <div id="participantsModal" class="modal">
        <div class="modal-content">
            <h3>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞</h3>
            <div id="participantsList" class="participants-list">
                <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="modal-actions">
                <button onclick="closeModal('participantsModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div id="userProfileModal" class="modal">
        <div class="modal-content">
            <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å –∏–≥—Ä–æ–∫–∞</h3>
            <div id="userProfileContent" class="user-profile-content">
                <!-- –ü—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="modal-actions">
                <button onclick="closeModal('userProfileModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div id="allUsersModal" class="modal">
        <div class="modal-content">
            <h3>üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
            <div id="allUsersList" class="all-users-list">
                <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="modal-actions">
                <button onclick="closeModal('allUsersModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –í—ã–±–æ—Ä –∞–≤–∞—Ç–∞—Ä–∫–∏ -->
    <div id="avatarModal" class="modal">
        <div class="modal-content">
            <h3>üñºÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä–∫—É</h3>
            <div class="avatar-options">
                <div class="avatar-option" onclick="selectEmojiAvatar('üë§')">üë§</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üé≠')">üé≠</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üÉè')">üÉè</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üéØ')">üéØ</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üèÜ')">üèÜ</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üëë')">üëë</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üé™')">üé™</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üé®')">üé®</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üåü')">üåü</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üî•')">üî•</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üíé')">üíé</div>
                <div class="avatar-option" onclick="selectEmojiAvatar('üöÄ')">üöÄ</div>
            </div>
            <div class="avatar-upload">
                <button class="avatar-upload-btn" onclick="uploadAvatar()">üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
                <div class="avatar-preview" id="avatarPreview" style="display: none;"></div>
            </div>
            <div class="modal-actions">
                <button onclick="closeModal('avatarModal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveAvatar()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="editProfileModal" class="modal">
        <div class="modal-content">
            <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h3>
            <form id="editProfileForm">
                <div class="form-group">
                    <label for="editGameNickname">–ò–≥—Ä–æ–≤–æ–π –Ω–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" id="editGameNickname" required maxlength="20">
                </div>
                <div class="form-group">
                    <label for="editPreferredGame">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è –∏–≥—Ä–∞:</label>
                    <select id="editPreferredGame">
                        <option value="texas_holdem">Texas Hold'em</option>
                        <option value="omaha">Omaha</option>
                        <option value="seven_card_stud">Seven Card Stud</option>
                        <option value="five_card_draw">Five Card Draw</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="closeModal('editProfileModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>